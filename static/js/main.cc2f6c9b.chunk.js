(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{138:function(e,t,n){},139:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},15:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n(106),s=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"cd3972f1-8cd8-46c6-80f0-a3030efbfc36"}}),a={getUsers:function(e,t){return s.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},followUser:function(e){return s.post("follow/".concat(e)).then((function(e){return e.data}))},unfollowUser:function(e){return s.delete("follow/".concat(e)).then((function(e){return e.data}))},getProfile:function(e){return c.getProfile(e)}},c={getProfile:function(e){return s.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return s.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return s.put("profile/status",e)}},i={me:function(){return s.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return s.delete("auth/login").then((function(e){return e.data}))}}},17:function(e,t,n){e.exports={navbar:"Navbar_navbar__2o3pX",item:"Navbar_item__2zmKw",active:"Navbar_active__11FDR"}},247:function(e,t,n){"use strict";n.r(t);var r=n(54),s=n(7),a=n.n(s),c=n(13),i=n(9),o=n(2),u=n(15),l="social-network/auth/SET_USER_DATA",d="social-network/auth/SET_MESSAGE",f={userId:null,email:null,login:null,isAuth:!1,messages:[]},j=function(e,t,n,r){return{type:l,payload:{userId:e,email:t,login:n,isAuth:r}}},p=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,s,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.me();case 2:0===(n=e.sent).resultCode&&(r=n.data,s=r.id,c=r.email,i=r.login,t(j(s,c,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),t.payload);case d:return Object(o.a)(Object(o.a)({},e),{},{messages:[].concat(Object(i.a)(e.messages),Object(i.a)(t.message))});default:return e}},g=n(83),h=n(74),O={},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return e},x=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(o.a)(Object(o.a)({},e),r):e}))},v="social-network/users/FOLLOW",w="social-network/users/UNFOLLOW",P="social-network/users/SET-USERS",y="social-network/users/SET-CURRENT-PAGE",S="social-network/users/SET-TOTAL-USERS-COUNT",k="social-network/users/TOGGLE-IS-FETCHING",C="social-network/users/TOGGLE_IS_FOLLOWING_PROGRESS",I={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},N=function(e){return{type:v,userId:e}},_=function(e){return{type:w,userId:e}},E=function(e){return{type:k,isFetching:e}},T=function(e,t){return{type:C,followingInProgress:e,userId:t}},U=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(T(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(s(n)),t(T(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(o.a)(Object(o.a)({},e),{},{users:x(e.users,t.userId,"id",{followed:!0})});case w:return Object(o.a)(Object(o.a)({},e),{},{users:x(e.users,t.userId,"id",{followed:!1})});case P:return Object(o.a)(Object(o.a)({},e),{},{users:t.users});case y:return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.currentPage});case S:return Object(o.a)(Object(o.a)({},e),{},{totalUsersCount:t.count});case k:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});case C:return Object(o.a)(Object(o.a)({},e),{},{followingInProgress:t.toggleFollowingInProgress?[].concat(Object(i.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!=t.userId}))]});default:return e}return e},z=n(107),L="SET_INITIALIZED",M={initialized:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;return t.type===L?Object(o.a)(Object(o.a)({},e),{},{initialized:!0}):e},B=Object(r.b)({profilePage:h.b,dialogsPage:g.a,sidebar:m,usersPage:A,auth:b,app:F}),R=Object(r.d)(B,Object(r.a)(z.a));window.store=R;var G=R,D=n(0),H=n.n(D),V=n(51),W=n.n(V),X=(n(138),n(3)),K=n(4),q=n(10),J=n(11),Y=n(5),Z=(n(139),n(23)),Q=n(19),$=n.p+"static/media/logo.6ce24c58.svg",ee=n(71),te=n.n(ee),ne=n(1),re=function(e){return Object(ne.jsxs)("header",{className:te.a.header,children:[Object(ne.jsx)("img",{src:$,alt:"logo"}),Object(ne.jsx)("div",{className:te.a.loginBlock,children:e.isAuth?Object(ne.jsxs)("div",{children:[e.login," ",Object(ne.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(ne.jsx)(Q.b,{to:"login",children:"Login"})})]})},se=function(e){Object(q.a)(n,e);var t=Object(J.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"render",value:function(){return Object(ne.jsx)(re,Object(o.a)({},this.props))}}]),n}(H.a.Component),ae=Object(Z.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.logout();case 2:0===e.sent.resultCode&&t(j(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(se),ce=n(17),ie=n.n(ce),oe=function(){return Object(ne.jsxs)("nav",{className:ie.a.navbar,children:[Object(ne.jsx)("div",{className:ie.a.item,children:Object(ne.jsx)(Q.b,{to:"/profile",activeClassName:ie.a.active,children:"Profile"})}),Object(ne.jsx)("div",{className:ie.a.item,children:Object(ne.jsx)(Q.b,{to:"/dialogs",activeClassName:ie.a.active,children:"Messages"})}),Object(ne.jsx)("div",{className:ie.a.item,children:Object(ne.jsx)(Q.b,{to:"/news",activeClassName:ie.a.active,children:"News"})}),Object(ne.jsx)("div",{className:ie.a.item,children:Object(ne.jsx)(Q.b,{to:"/music",activeClassName:ie.a.active,children:"Music"})}),Object(ne.jsx)("div",{className:ie.a.item,children:Object(ne.jsx)(Q.b,{to:"/settings",activeClassName:ie.a.active,children:"Settings"})}),Object(ne.jsx)("div",{className:ie.a.item,children:Object(ne.jsx)(Q.b,{to:"/users",activeClassName:ie.a.active,children:"Users"})})]})},ue=(n(145),function(){return Object(ne.jsx)("div",{children:"News"})}),le=(n(146),function(){return Object(ne.jsx)("div",{children:"Music"})}),de=(n(147),function(){return Object(ne.jsx)("div",{children:"Settings"})}),fe=n(37),je=n.n(fe),pe=n.p+"static/media/person.ba3e9327.png",be=n(28),ge=function(e){for(var t=e.totalItemsCount,n=e.pageSize,r=e.currentPage,s=e.onPageChanged,a=e.portionSize,c=void 0===a?10:a,i=Math.ceil(t/n),o=[],u=1;u<=i;u++)o.push(u);var l=Math.ceil(i/c),d=Object(D.useState)(1),f=Object(be.a)(d,2),j=f[0],p=f[1],b=(j-1)*c+1,g=j*c;return Object(ne.jsxs)("div",{className:je.a.paginator,children:[j>1&&Object(ne.jsx)("button",{onClick:function(){p(j-1)},children:"PREV"}),o.filter((function(e){return e>=b&&e<=g})).map((function(e){return Object(ne.jsx)("span",{className:r===e?je.a.selectedPage:je.a.pageNumber,onClick:function(t){s(e)},children:e},e)})),l>j&&Object(ne.jsx)("button",{onClick:function(){p(j+1)},children:"NEXT"})]})},he=function(e){return Object(ne.jsxs)("div",{children:[Object(ne.jsx)(ge,{totalItemsCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:e.onPageChanged}),e.users.map((function(t){return Object(ne.jsxs)("div",{children:[Object(ne.jsxs)("span",{children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(Q.b,{to:"/profile/"+t.id,children:Object(ne.jsx)("img",{src:null!=t.photos.small?t.photos.small:pe,className:je.a.userPhoto})})}),Object(ne.jsx)("div",{children:t.followed?Object(ne.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)},children:"Unfollow"}):Object(ne.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(ne.jsxs)("span",{children:[Object(ne.jsxs)("span",{children:[Object(ne.jsx)("div",{children:t.name}),Object(ne.jsx)("div",{children:t.status})]}),Object(ne.jsx)("span",{})]})]},t.id)}))]})},Oe=n(55),me=n(114),xe=Object(me.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),ve=function(e){return e.usersPage.pageSize},we=function(e){return e.usersPage.totalUsersCount},Pe=function(e){return e.usersPage.currentPage},ye=function(e){return e.usersPage.isFetching},Se=function(e){return e.usersPage.followingInProgress},ke=function(e){Object(q.a)(n,e);var t=Object(J.a)(n);function n(){var e;Object(X.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsers(t,e.props.pageSize)},e}return Object(K.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(ne.jsxs)(ne.Fragment,{children:[this.props.isFetching?Object(ne.jsx)(Oe.a,{}):null,Object(ne.jsx)(he,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,selectedPage:this.props.selectedPage,followingInProgress:this.props.followingInProgress,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow})]})}}]),n}(H.a.Component),Ce=Object(Z.b)((function(e){return{users:xe(e),pageSize:ve(e),totalUsersCount:we(e),currentPage:Pe(e),isFetching:ye(e),followingInProgress:Se(e)}}),{acceptFollow:N,acceptUnfollow:_,setCurrentPage:function(e){return{type:y,currentPage:e}},toggleFollowingInProgress:T,getUsers:function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(E(!0)),n.next=3,u.c.getUsers(e,t);case 3:s=n.sent,r(E(!1)),r((c=s.items,{type:P,users:c})),r((a=s.totalCount,{type:S,count:a}));case 7:case"end":return n.stop()}var a,c}),n)})));return function(e){return n.apply(this,arguments)}}()},follow:function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U(n,e,u.c.followUser.bind(u.c),N);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U(n,e,u.c.unfollowUser.bind(u.c),_);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(ke),Ie=n(36),Ne=n(53),_e=n(42),Ee=n.n(_e),Te=function(e){var t=Ne.a({email:Ne.b().typeError("\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0439").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),password:Ne.b().typeError("\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0439").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e")});return Object(ne.jsx)(Ie.c,{initialValues:{email:"",password:"",rememberMe:!1},validateOnBlur:!0,validationSchema:t,onSubmit:e.onSubmit,children:function(t){var n=t.values,r=t.errors,s=t.touched,a=t.handleChange,c=t.handleBlur,i=t.isValid,o=t.handleSubmit,u=t.dirty;return Object(ne.jsxs)(Ie.b,{onSubmit:o,children:[Object(ne.jsxs)("div",{children:[Object(ne.jsx)(Ie.a,{placeholder:"Login",name:"email",onChange:a,onBlur:c,value:n.email,className:s.email&&r.email?Ee.a.error:null}),s.email&&r.email?Object(ne.jsx)("p",{className:Ee.a.errorText,children:r.email}):null]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)(Ie.a,{placeholder:"Password",name:"password",onChange:a,onBlur:c,value:n.password,className:s.password&&r.password?Ee.a.error:null}),s.password&&r.password?Object(ne.jsx)("p",{className:Ee.a.errorText,children:r.password}):null]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)(Ie.a,{name:"rememberMe",component:"input",type:"checkbox"}),"Remember me"]}),Object(ne.jsx)("div",{children:Object(ne.jsx)("button",{type:"submit",disabled:!i&&!u,children:"Login"})}),e.isAuth?null:e.messages]})}})},Ue=Object(Z.b)((function(e){return{messages:e.auth.messages,isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(s){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.login(e,t,n);case 2:0===(c=r.sent).resultCode?s(p()):s((a=c.messages,{type:d,message:a}));case 4:case"end":return r.stop()}var a}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("h1",{children:"Login"}),Object(ne.jsx)(Te,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)},messages:e.messages,isAuth:e.isAuth})]})})),Ae=H.a.lazy((function(){return n.e(4).then(n.bind(null,256))})),ze=H.a.lazy((function(){return n.e(3).then(n.bind(null,255))})),Le=function(e){Object(q.a)(n,e);var t=Object(J.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return Object(ne.jsxs)("div",{className:"app-wrapper",children:[Object(ne.jsx)(ae,{}),Object(ne.jsx)(oe,{}),Object(ne.jsx)(D.Suspense,{fallback:Object(ne.jsx)(Oe.a,{}),children:Object(ne.jsxs)("div",{className:"app-wrapper-content",children:[Object(ne.jsx)(Y.b,{path:"/profile/:userId?",render:function(){return Object(ne.jsx)(ze,{})}}),Object(ne.jsx)(Y.b,{path:"/dialogs",render:function(){return Object(ne.jsx)(Ae,{})}}),Object(ne.jsx)(Y.b,{path:"/news",render:function(){return Object(ne.jsx)(ue,{})}}),Object(ne.jsx)(Y.b,{path:"/music",render:function(){return Object(ne.jsx)(le,{})}}),Object(ne.jsx)(Y.b,{path:"/settings",render:function(){return Object(ne.jsx)(de,{})}}),Object(ne.jsx)(Y.b,{path:"/users",render:function(){return Object(ne.jsx)(Ce,{})}}),Object(ne.jsx)(Y.b,{path:"/login",render:function(){return Object(ne.jsx)(Ue,{})}})]})})]})}}]),n}(H.a.Component),Me=Object(Z.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(p());case 2:t({type:L});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Le);W.a.render(Object(ne.jsx)(H.a.StrictMode,{children:Object(ne.jsx)(Q.a,{children:Object(ne.jsx)(Z.a,{store:G,children:Object(ne.jsx)(Me,{})})})}),document.getElementById("root"))},37:function(e,t,n){e.exports={userPhoto:"Users_userPhoto___VX75",selectedPage:"Users_selectedPage__eXpud",pageNumber:"Users_pageNumber__18PEI"}},42:function(e,t,n){e.exports={error:"Login_error__10UBI",errorText:"Login_errorText__3I0Ot"}},55:function(e,t,n){"use strict";n(148);var r=n(1);t.a=function(e){return Object(r.jsx)("div",{style:{width:"1000px",height:"700px",textAlign:"center"},children:Object(r.jsx)("box-icon",{name:"loader",animation:"tada",style:{width:"100px",height:"100px",marginTop:"270px"}})})}},71:function(e,t,n){e.exports={header:"Header_header__1dnau",loginBlock:"Header_loginBlock__30_lg"}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"f",(function(){return m}));var r=n(7),s=n.n(r),a=n(13),c=n(9),i=n(2),o=n(15),u="social-network/profile/ADD-POST",l="social-network/profile/UPDATE-NEW-POST-TEXT",d="social-network/profile/SET-USER-PROFILE",f="social-network/profile/SET_STATUS",j={posts:[{id:1,message:"Hello",likesCount:12},{id:2,message:"Hi",likesCount:13},{id:3,message:"How are you?",likesCount:10},{id:4,message:"I'm fine, and you?",likesCount:15},{id:5,message:"I'm well",likesCount:2},{id:6,message:"Bye",likesCount:5}],newPostText:"",profile:null,status:""},p=function(){return{type:u}},b=function(e){return{type:l,newText:e}},g=function(e){return{type:f,status:e}},h=function(e){return function(){var t=Object(a.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e||(e="2"),t.next=3,o.c.getProfile(e);case 3:r=t.sent,n({type:d,profile:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(a.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e||(e="2"),t.next=3,o.b.getStatus(e);case 3:r=t.sent,n(g(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(a.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.updateStatus(e);case 2:0===(r=t.sent).resultCode&&n(g(r.status));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n={id:5,message:e.newPostText,likesCount:0};return Object(i.a)(Object(i.a)({},e),{},{posts:[n].concat(Object(c.a)(e.posts)),newPostText:""});case l:return Object(i.a)(Object(i.a)({},e),{},{newPostText:t.newText});case d:return Object(i.a)(Object(i.a)({},e),{},{profile:t.profile});case f:return Object(i.a)(Object(i.a)({},e),{},{status:t.status});default:return e}}},83:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u}));var r=n(9),s=n(2),a="social-network/dialogs/UPDATE-NEW-MESSAGE-BODY",c="social-network/dialogs/SEND-MESSAGE",i={dialogs:[{id:1,name:"Sasha"},{id:2,name:"Vadim"},{id:3,name:"Kirill"},{id:4,name:"Gulnaz"},{id:5,name:"Valeria"},{id:6,name:"Bulat"}],messages:[{id:1,message:"Hello"},{id:2,message:"Hi"},{id:3,message:"How are you?"},{id:4,message:"I'm fine, and you?"},{id:5,message:"I'm well"},{id:6,message:"Bye"}],newMessageBody:""},o=function(){return{type:c}},u=function(e){return{type:a,body:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return Object(s.a)(Object(s.a)({},e),{},{newMessageBody:t.body});case c:var n=e.newMessageBody;return Object(s.a)(Object(s.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:7,message:n}]),newMessageBody:""});default:return e}}}},[[247,1,2]]]);
//# sourceMappingURL=main.cc2f6c9b.chunk.js.map